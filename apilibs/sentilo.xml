<blocks app="Snapi http://snapi.citilab.eu" version="1"><block-definition s="alerts" type="reporter" category="api"><header></header><code></code><inputs></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>catalog/alert</l></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="last alarm with id %&apos;id&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>alarm/</l><block var="id"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest %&apos;number&apos; alarms with id %&apos;id&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">1</input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>alarm/</l><block var="id"/><l>?limit=</l><block var="number"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest %&apos;number&apos; alarms with id %&apos;id&apos; from %&apos;date&apos; %&apos;time&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">1</input><input type="%s"></input><input type="%s">dd/mm/yyyy</input><input type="%s">hh:mm:ss</input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>alarm/</l><block var="id"/><l>?limit=</l><block var="number"/><l>&amp;from=</l><block var="date"/><l>T</l><block var="time"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest observations from provider %&apos;provider&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest observations from provider %&apos;provider&apos; from %&apos;date&apos; %&apos;time&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s">dd/mm/yyyy</input><input type="%s">hh:mm:ss</input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/><l>?from=</l><block var="date"/><l>T</l><block var="time"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="last observation from sensor %&apos;sensor&apos; of provider %&apos;provider&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/><l>/</l><block var="sensor"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest %&apos;number&apos; observations from sensor %&apos;sensor&apos; of provider %&apos;provider&apos; from %&apos;date&apos; %&apos;time&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">1</input><input type="%s"></input><input type="%s"></input><input type="%s">dd/mm/yyyy</input><input type="%s">hh:mm:ss</input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/><l>/</l><block var="sensor"/><l>?limit=</l><block var="number"/><l>&amp;from=</l><block var="date"/><l>T</l><block var="time"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest orders from provider %&apos;provider&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>order/</l><block var="provider"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="last order from sensor %&apos;sensor&apos; provider %&apos;provider&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>order/</l><block var="provider"/><l>/</l><block var="sensor"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest %&apos;number&apos; orders from sensor %&apos;sensor&apos; provider %&apos;provider&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">1</input><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>order/</l><block var="provider"/><l>/</l><block var="sensor"/><l>?limit=</l><block var="number"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="latest %&apos;number&apos; orders from sensor %&apos;sensor&apos; provider %&apos;provider&apos; from %&apos;date&apos; %&apos;time&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">1</input><input type="%s"></input><input type="%s"></input><input type="%s">dd/mm/yyyy</input><input type="%s">hh:mm:ss</input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>order/</l><block var="provider"/><l>/</l><block var="sensor"/><l>?limit=</l><block var="number"/><l>&amp;from=</l><block var="date"/><l>T</l><block var="time"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="providers" type="reporter" category="api"><header></header><code></code><inputs></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><l>catalog</l><l>GET</l></custom-block></block></script></block-definition><block-definition s="sensors of type %&apos;type&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s">anenometer<options>anenometer
humidity
noise
pluviometer
rain
status
temperature
wind</options></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>catalog?type=</l><block var="type"/></list></block><l>GET</l></custom-block></block></script></block-definition><block-definition s="sentilo service %&apos;service&apos; method %&apos;method&apos;" type="reporter" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s">GET<options>GET
PUT
DELETE</options></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="method"/><l>GET</l></block><script><block s="doReport"><block s="extendedApiCall"><l><option>GET</option></l><l>http://</l><block s="reportJoinWords"><list><custom-block s="sentilo url"></custom-block><block var="service"/></list></block><list></list><list><block s="newAssociation"><l>IDENTITY_KEY</l><custom-block s="sentilo key"></custom-block></block></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="method"/><l>PUT</l></block><script><block s="doReport"><block s="extendedApiCall"><l><option>PUT</option></l><l>http://</l><block s="reportJoinWords"><list><custom-block s="sentilo url"></custom-block><block var="service"/></list></block><list></list><list><block s="newAssociation"><l>IDENTITY_KEY</l><custom-block s="sentilo key"></custom-block></block></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="method"/><l>DELETE</l></block><script><block s="doReport"><block s="extendedApiCall"><l><option>DELETE</option></l><l>http://</l><block s="reportJoinWords"><list><custom-block s="sentilo url"></custom-block><block var="service"/></list></block><list></list><list><block s="newAssociation"><l>IDENTITY_KEY</l><custom-block s="sentilo key"></custom-block></block></list></block></block></script></block></script></block-definition><block-definition s="sentilo url" type="reporter" category="api"><header></header><code></code><inputs></inputs><script><block s="doReport"><l>connecta.bcn.cat:8081/</l></block></script></block-definition><block-definition s="sentilo key" type="reporter" category="api"><header></header><code></code><inputs></inputs><script><block s="doReport"><l>c956c302086a042dd0426b4e62652273e05a6ce74d0b77f8b5602e0811025066</l></block></script></block-definition><block-definition s="types of sensors" type="reporter" category="api"><header></header><code></code><inputs></inputs><script><block s="doDeclareVariables"><list><l>types</l></list></block><block s="doSetVar"><l>types</l><block s="reportNewList"><list></list></block></block><block s="doForEach"><l>each provider</l><block s="valueAt"><l>providers</l><custom-block s="sensors of type %s"><l>status</l></custom-block></block><script><block s="doForEach"><l>each sensor</l><block s="valueAt"><l>sensors</l><block var="each provider"/></block><script><block s="doIf"><block s="reportNot"><block s="reportListContainsItem"><block var="types"/><block s="valueAt"><l>type</l><block var="each sensor"/></block></block></block><script><block s="doAddToList"><block s="valueAt"><l>type</l><block var="each sensor"/></block><block var="types"/></block></script></block></script></block></script></block><block s="doReport"><block s="objectToJsonString"><block var="types"/></block></block></script></block-definition><block-definition s="publish data %&apos;data&apos; from sensor %&apos;sensor&apos; of provider %&apos;provider&apos;" type="command" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/><l>/</l><block var="sensor"/><l>/</l><block var="data"/></list></block><l>PUT</l></custom-block></block></script></block-definition><block-definition s="delete last observation from sensor %&apos;sensor&apos; of provider %&apos;provider&apos;" type="command" category="api"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="sentilo service %s method %s"><block s="reportJoinWords"><list><l>data/</l><block var="provider"/><l>/</l><block var="sensor"/></list></block><l>DELETE</l></custom-block></block></script></block-definition></blocks>
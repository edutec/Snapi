<blocks app="Snap! 4.0, http://snap.berkeley.edu" version="1"><block-definition s="set stage to map at %&apos;lat&apos; , %&apos;long&apos;" type="command" category="api"><header></header><code></code><inputs><input type="%n"></input><input type="%n"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list></list><l>if (document.getElementById(&apos;mapDiv&apos;) == null) {&#xD;  mapDiv = document.createElement(&apos;div&apos;);&#xD;  mapDiv.setAttribute(&apos;id&apos;,&apos;mapDiv&apos;);&#xD;  document.body.appendChild(mapDiv);&#xD;}</l></block><list></list></block><block s="doWaitUntil"><block s="evaluate"><block s="reportJSFunction"><list></list><l>return (document.getElementById(&apos;mapDiv&apos;) != null);</l></block><list></list></block></block><block s="doRun"><block s="reportJSFunction"><list><l>lat</l><l>long</l></list><l>var loc = ol.proj.transform(&#xD;    [lat, long], &apos;EPSG:4326&apos;, &apos;EPSG:3857&apos;);&#xD;&#xD;var map = new ol.Map({&#xD;  target: &apos;mapDiv&apos;,&#xD;  renderer: &apos;canvas&apos;,&#xD;  view: new ol.View({&#xD;    projection: &apos;EPSG:3857&apos;,&#xD;    zoom: 3,&#xD;    center: loc&#xD;  }),&#xD;  layers: [&#xD;    new ol.layer.Tile({source: new ol.source.MapQuest({layer: &apos;osm&apos;})})&#xD;  ]&#xD;});</l></block><list><block var="lat"/><block var="long"/></list></block></script></block-definition></blocks>